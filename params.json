{"name":"Ml cp","tagline":"Machine Learning Course Project","body":"---\r\ntitle: \"Machine Learning Course Project\"\r\nauthor: \"dmontiel242\"\r\ndate: \"October 25, 2015\"\r\noutput: html_document\r\n---\r\n\r\n## Synopsis: \r\nA random forest model with cross-validation is applied to fitness data in order to assess activity quality, which is the factor variable classe in the pml data set. The model creates a training and test set using the createDataPartition function in the caret package. \r\n\r\n## Out of Sample Error and cross-validation\r\n\r\nThe error rate from the test set provides a measure of the out of sample error. Cross-validation is performed using the trControl option in the train in the caret package and is set to use k-folds cross-validation with 5 folds.\r\n\r\n## Data Pre-Processing:\r\nThe data is preprocessed using principal component analysis , variables with near zero variance are removed and all remaining variables are converted to numeric variables. \r\n\r\n\r\n```{r}\r\nlibrary(caret)\r\nlibrary(randomForest)\r\nurl <- 'https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv'\r\n\r\nif (!exists('pmldata')){\r\n  print('dowloading data')\r\n  pml <- download.file(url,destfile = \"C:\\\\Users\\\\Dan\\\\Desktop\\\\Coursera\\\\pmltraining.csv\")\r\n  pmldata = read.csv(\"C:\\\\Users\\\\Dan\\\\Desktop\\\\Coursera\\\\pmltraining.csv\")\r\n}\r\n#subset data into training and test sets for cross-validation\r\n#inTrain <- createDataPartition(y=pmldata$classe, p = 0.75,list = FALSE)\r\nclassy <- factor(c(pmldata$classe))\r\nnumcol <- length(colnames(pmldata))\r\n#isnumer <- sapply(pmldata, is.numeric)\r\npmlnumer <- pmldata[,-numcol]\r\npmlnumer <-pmldata\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- pmlnumer[,-1]\r\npmlnumer <- data.frame(sapply(pmlnumer, as.numeric))\r\npmldat<- pmlnumer\r\n#pmldat <- pmldat[complete.cases(pmldat),]\r\nnzv <- nearZeroVar(pmldat)\r\npmldat <- pmldat[,-nzv]\r\nrow.names(pmldat) <- 1:nrow(pmldat)\r\npmldat[is.na(pmldat)]<-0\r\npmldat[,'classe'] <- factor(pmldat[,'classe'])\r\ninTrain <- createDataPartition(y=pmldat$classe, p = 0.7,list = FALSE)\r\ntraining <- pmldat[inTrain,]\r\ntesting <- pmldat[-inTrain,]\r\npreProc <- preProcess(training, method = 'pca', thresh = 0.90)\r\ntrainPC <- predict(preProc,training)\r\n```\r\nThe model was applied with the train function in the caret package but was not executed to save time in knitting this document.\r\n\r\nmodelfit2 <- train(training$classe ~., method = 'rf',trControl=trainControl(method=\"cv\",number=5),data=trainPC)\r\nsaveRDS(modelfit2,'mysavedModel002.rds')\r\n\r\n\r\nUsing submission set was downloaded and pre-processed in the same way as the training set. The predict function was applied to the cleaned and processed submission set with the same PCA preprocessing parameters.\r\n```{r}\r\n\r\nlibrary(RCurl)\r\n\r\nurl2 <- 'https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv'\r\n\r\nif (!exists('testdata')){\r\ntestdat <- getURL(url2,\r\n               ssl.verifypeer=0L, followlocation=1L)\r\n\r\n#  testdat <- download.file(url2,destfile = \"C:\\\\Users\\\\Dan\\\\Desktop\\\\Coursera\\\\testdata.csv\")\r\ntestdata <-  read.csv(\"C:\\\\Users\\\\Dan\\\\Desktop\\\\Coursera\\\\testdata.csv\")\r\n}\r\ntestdata<- data.frame(sapply(testdata, as.numeric))\r\ntestdata <- testdata[,-1]\r\ntestdata <- testdata[,-1]\r\ntestdata <- testdata[,-1]\r\ntestdata <- testdata[,-1]\r\ntestdata <- testdata[,-1]\r\ntestdata <- testdata[,-1]\r\ntestdata <- testdata[,-1]\r\n\r\ntestdata <- testdata[,-nzv]\r\ntestdata[is.na(testdata)]<-0\r\n\r\n#testpc <- predict(preProc,testdata)\r\n#answers = factor(predict(modelfit2,testpc),labels=c('A','B','C','D','E'))\r\npml_write_files = function(x){\r\n  n = length(x)\r\n  for(i in 1:n){\r\n    filename = paste0(\"problem_id_\",i,\".txt\")\r\n    write.table(x[i],file=filename,quote=FALSE,row.names=FALSE,col.names=FALSE)\r\n  }\r\n}\r\n#pml_write_files(answers)\r\n```\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}